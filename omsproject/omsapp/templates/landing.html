{% extends 'index.html' %}
{% load static %}
{% block landing %}
<!-- Stats Section -->
    <section class="bg-gray-50 py-6">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative" x-data="{ scrollPos: 0 }">

        <!-- Left Arrow -->
        <button @click="$refs.carousel.scrollBy({ left: -300, behavior: 'smooth' })"
                class="absolute left-0 top-1/2 -translate-y-1/2 bg-white shadow-md rounded-full p-2 z-10">
          <svg class="h-5 w-5 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M12.707 15.707a1 1 0 01-1.414 0L6.586 11l4.707-4.707a1 1 0 011.414 1.414L9.414 11l3.293 3.293a1 1 0 010 1.414z" clip-rule="evenodd"/>
          </svg>
        </button>

        <!-- Carousel Items -->
        <div x-ref="carousel" class="flex overflow-x-auto gap-4 scrollbar-hide scroll-smooth px-10 py-2">
          {% for item in stats %}
          <a href="{% url 'shop' %}?item_type={{item.label}}">
            <div class="min-w-[180px] bg-white rounded-xl shadow p-6 text-center flex-shrink-0 hover:shadow-md transition duration-300">
              <h3 class="text-2xl font-bold text-green-600">{{ item.value }}</h3>
              <p class="text-sm text-gray-600">{{ item.label }}</p>
            </div>
          </a>
          {% endfor %}
        </div>

        <!-- Right Arrow -->
        <button @click="$refs.carousel.scrollBy({ left: 300, behavior: 'smooth' })"
                class="absolute right-0 top-1/2 -translate-y-1/2 bg-white shadow-md rounded-full p-2 z-10">
          <svg class="h-5 w-5 text-gray-600" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M7.293 4.293a1 1 0 011.414 0L13.414 9l-4.707 4.707a1 1 0 01-1.414-1.414L10.586 9 7.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
          </svg>
        </button>
      </div>
    </section>

    <!-- Hero Section -->
    <section class="bg-green-100 py-12 text-center">
      <div class="relative w-full h-[280px]"
        x-data="{ 
          activeSlide: 0, 
          desktopSlides: [
            '{% static 'img/hero/1.jpg' %}', 
            '{% static 'img/hero/2.jpg' %}', 
            '{% static 'img/hero/3.jpg' %}' 
          ],
          mobileSlides: [
            '{% static 'img/hero/11.jpg' %}', 
            '{% static 'img/hero/21.jpg' %}', 
            '{% static 'img/hero/31.jpg' %}'
          ],
          isMobile: window.innerWidth < 768,
          get slides() {
            return this.isMobile ? this.mobileSlides : this.desktopSlides;
          }
        }"
        x-init="setInterval(() => { 
          activeSlide = (activeSlide + 1) % slides.length 
        }, 5000);
          window.addEventListener('resize', () => {
            isMobile = window.innerWidth < 768;
        });"> <!-- Auto change every 4 seconds -->


        <!-- Carousel Slides -->
        <template x-for="(slide, index) in slides" :key="index">
          <div x-show="activeSlide === index"
              x-transition:enter="transition ease-out duration-500"
              x-transition:enter-start="opacity-0"
              x-transition:enter-end="opacity-100"
              x-transition:leave="transition ease-in duration-300"
              x-transition:leave-start="opacity-100"
              x-transition:leave-end="opacity-0"
              class="absolute inset-0">
            <img :src="slide" alt="Slide" class="w-full h-full object-cover rounded">
          </div>
        </template>

        <!-- Arrows -->
        <button @click="activeSlide = (activeSlide === 0) ? slides.length - 1 : activeSlide - 1"
                class="absolute left-0 top-1/2 transform -translate-y-1/2 bg-white text-green-800 p-2 rounded-r shadow hover:bg-green-100">
          &#10094;
        </button>
        <button @click="activeSlide = (activeSlide === slides.length - 1) ? 0 : activeSlide + 1"
                class="absolute right-0 top-1/2 transform -translate-y-1/2 bg-white text-green-800 p-2 rounded-l shadow hover:bg-green-100">
          &#10095;
        </button>

        <!-- Floating CTA Button -->
        <div class="absolute bottom-1 left-1/2 transform -translate-x-1/2 z-10">
          <a href="/shop" class="bg-[#FF9933] text-white px-6 py-2 rounded-full shadow-lg hover:bg-green-800 transition">
            Shop Now
          </a>
        </div>
      </div>
    </section>

    <!-- Featured Crops -->
    <section class="py-12 px-6">
      {% block featured_product %}{% endblock%}
    </section>

    <!-- How it Works -->
    <section class="py-12 bg-green-50">
      <div class="max-w-6xl mx-auto text-center">
        <h2 class="text-3xl font-bold mb-8">How Farmer Harvest Works</h2>
        <div class="grid md:grid-cols-3 gap-6 text-left">
          <div class="p-4">
            <h3 class="font-semibold text-lg mb-2">1. Register</h3>
            <p class="text-sm text-gray-700">Create a free account as an FPO or consumer.</p>
          </div>
          <div class="p-4">
            <h3 class="font-semibold text-lg mb-2">2. List or Browse Crops</h3>
            <p class="text-sm text-gray-700">Post your produce or explore available listings.</p>
          </div>
          <div class="p-4">
            <h3 class="font-semibold text-lg mb-2">3. Connect & Transact</h3>
            <p class="text-sm text-gray-700">Chat, negotiate and complete transactions securely.</p>
          </div>
        </div>
      </div>
    </section>
{% endblock %}