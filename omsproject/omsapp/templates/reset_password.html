{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Reset Password</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body class="bg-gray-100">
  <!-- Header -->
  <header class="text-white p-4" style="background-color: #047857;">
    {% include 'header.html' %}
  </header>
  <section class="py-16">
    <div class="max-w-3xl mx-auto px-4">
      <div class="bg-white shadow-md rounded-lg p-8">
        <h2 class="text-2xl font-semibold text-gray-800 mb-8 text-center">üîê Reset Your Password</h2>

        <form id="resetForm" method="post" action="{% url 'resetpassword' %}" onsubmit="return checkPasswords(event)">
          {% csrf_token %}

          <div class="grid grid-cols-1 md:grid-cols-3 gap-y-6 gap-x-6 items-center">
            <!-- Username -->
            <label for="username" class="text-sm font-medium text-gray-700">Username</label>
            <div class="md:col-span-2">
              <input type="text" id="username" name="username" value="{{ username }}"
                     {% if username %}readonly{% endif %}
                     class="w-full px-4 py-2 border border-gray-300 rounded-md bg-gray-100 {% if username %}cursor-not-allowed{% endif %} focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>

            <!-- Phone -->
            <label for="phone" class="text-sm font-medium text-gray-700">Phone Number</label>
            <div class="md:col-span-2">
              <input type="text" id="phone" name="phone" value="{{ phone }}"
                     {% if phone %}readonly{% endif %}
                     class="w-full px-4 py-2 border border-gray-300 rounded-md bg-gray-100 {% if phone %}cursor-not-allowed{% endif %} focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>

            <!-- Email -->
            <label for="email" class="text-sm font-medium text-gray-700">Email</label>
            <div class="md:col-span-2">
              <input type="email" id="email" name="email" value="{{ email }}"
                     class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>

            <!-- New Password -->
            <label for="password" class="text-sm font-medium text-gray-700">New Password</label>
            <div class="md:col-span-2">
              <input type="password" id="password" name="password"
                     class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
            </div>

            <!-- Confirm Password -->
            <label for="password1" class="text-sm font-medium text-gray-700">Confirm Password</label>
            <div class="md:col-span-2">
              <input type="password" id="password1" name="password1"
                     class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
              <p id="passwordError" class="text-red-600 text-sm mt-1 hidden">Passwords do not match!</p>
            </div>
          </div>

          <!-- Submit Button -->
          <div class="mt-8 text-center">
            <button type="submit"
                    class="inline-block w-full md:w-auto px-6 py-2 bg-blue-600 text-white font-semibold rounded hover:bg-blue-700 transition">
              Reset Password
            </button>
          </div>
        </form>
      </div>
    </div>
  </section>
  <footer class="bg-green-800 text-white py-6 mt-10">
    {% include 'footer.html' %}
  </footer>
  <script>
    function checkPasswords(event) {
      const password = document.getElementById('password').value;
      const confirmPassword = document.getElementById('password1').value;
      const errorText = document.getElementById('passwordError');

      if (password !== confirmPassword) {
        event.preventDefault();
        errorText.classList.remove('hidden');
        return false;
      } else {
        errorText.classList.add('hidden');
        return true;
      }
    }
  </script>
</body>
</html>